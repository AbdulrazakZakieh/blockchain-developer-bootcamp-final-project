<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Zero-interest Loan</title>
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"/>
    <script src="https://cdn.jsdelivr.net/gh/ethereum/web3.js/dist/web3.min.js"></script>
  </head>
  <body>
    <div class="container mt-4">
      <h1 class="text-center">Disputeable Contract</h1>
      <p class="text-justify">The purpose of this smart contract is to let two parties have an on-chain real contract where one of the parties will put Ether as a guarantee. The other party can release the held Ether whenever they want according to the agreement they have with the first party. In case of disagreement between the two parties, they can ask for dispute resolution. There will be three judges that will go back to the on-chain real contract and make a decision based on that. The judges for any Disputeable Contract will be chosen randomly from a pool of judges. The dispute resolution will be according to the dominant decision by the three judges.</p>
      <h2>Features</h2>
      <ul class="text-justify">
        <li>The entity who will be providing Ether as guarantee, will create the Disputeable Contract where they will enter the address of the other party and send also the Ether value that will be held as a guarantee. After creating the Disputeable Contract, the user will get an id to refer to it.</li>
        <li>The <b>judges are chosen randomly</b> from a pool of judges that can be controlled by the smart contract owner.</li>
        <li>The <b>second party will have to sign the contract</b> to make the Disputeable Contract valid.</li>
        <li>The first party can withdraw their Ether as long as the second party did not sign the Disputeable Contract.</li>
        <li>Once the second party signs the Disputeable Contract, they will be able to release the held Ether manually according to the agreement they have with the first party. In addition, the first party will be
          able to pay the held Ether to the second party.
        </li>
        <li>At any time, if the Ether is not released or paid, <b>any party can ask for dispute resolution</b></li>
        <li>When a dispute resolution is filled, the <b>judges will have to refer to the on-chain real contract to make a decision</b> whether to release the held Ether or pay it to the second party.</li>
        <li>Each <b>judge receives a percentage of the held Ether</b> to compensate them for the time spent on judging and the Gas used to send the final decision to the blockchain.</li>
        <li><b>No fees</b> at all if there is <b>no dispute filled</b>.</li>
      </ul>
      <p>
      </p>
      <div id="mm-detected"></div>
      <!-- Connect to MetaMask Wallet -->
      <button id="mm-connect" class="btn btn-secondary m-2">Connect to MetaMask</button>
      <!-- Display current address -->
      <div id="mm-current-account" class="m-2"></div>
      <!-- Provide an input to change the contract text value -->
      <!-- <div>
        <input id="ss-input-box" type="number" placeholder="Provide input"/>  
      </div>
      <button id="ss-input-button">Submit Value</button> -->
      <!-- Read input from contract -->
      <!-- <div>
        <button id="ss-get-value">Get Simple Storage value</button>
      </div>
      <div id="ss-display-value">Current Simple Storage Value: </div> -->
      <h2>Create Disputeable Contract</h2>
      <div class="row">
        <div class="col-md-4 mt-4 mb-4 ">
          <p>You only have to </p>
            <ol>
              <li><b>Upload the Real Contract Image</b></li>
              <li><b>Enter the second party address</b></li>
              <li><b>Enter the guarantee value in Ether</b></li>
            </ol>
        </div>
        <div class="col-md-8 mt-4 mb-4 ">
          <div class="border shadow p-4">
            <form action="">
              <div class="form-group">
                <label for="real_contract_image">Real Contract Image</label>
                <input type="file" name="real_contract_image" id='real_contract_image' class="form-control">
              </div>
              <div class="form-group mt-2">
                <label for="">Second Party Address</label>
                <input type="text" name="second_party_address" class="form-control">
              </div>
              <div class="form-group mt-2">
                <label for="">Guarantee Value</label>
                <input type="number" step="0.00001" min="2" value="2"  class="form-control">
              </div>
              <input type="button" class="btn btn-block btn-success mt-2" value='Submit Disputeable Contract'>
            </form>
          </div>
        </div>
      </div>
      
      
    </div>
    
  </body>



  <!-- Had trouble and had to move the script down! -->
  <script src="https://cdn.jsdelivr.net/npm/web3@latest/dist/web3.min.js"></script>
  <script src="https://code.jquery.com/jquery-3.6.0.js" integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk=" crossorigin="anonymous"></script>
  <script src="dapp.js"></script>
</html>